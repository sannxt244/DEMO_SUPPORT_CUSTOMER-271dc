<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Danh sách mặt hàng bán chạy</title>
</head>

<body>
  <div class="container">
    <div
      style="max-width: 440px; margin: 20px auto; border: 2px solid #22C3A6; border-radius: 12px; box-shadow: 0 2px 6px #0001; background: #FFF; font-family: 'Segoe UI',">
      <div
        style="background: #22C3A6; color: #FFF; font-weight: bold; padding: 12px 16px; border-top-left-radius: 10px; border-top-right-radius: 10px; font-size: 18px;">
        Danh sách các mặt hàng bán chạy (Sắp xếp theo doanh thu)
      </div>
      <table style="width: 100%; border-collapse: collapse; font-size: 18px; margin-top: 8px;">
        <thead>
          <tr style="color: #2F3033;">
            <th style="padding: 8px 16px; text-align: left; font-weight: bold;">Mặt hàng</th>
            <th style="padding: 8px 0; text-align: center; font-weight: bold;">Số lượng</th>
            <th style="padding: 8px 16px; text-align: right; font-weight: bold;">Doanh thu</th>
          </tr>
        </thead>
        <tbody>
          <tr style="color: #252627;">
            <td style="padding: 6px 16px;">Thịt bò Úc</td>
            <td style="padding: 6px 0; text-align: center; font-weight: bold;">1</td>
            <td style="padding: 6px 16px; text-align: right; font-weight: bold; color:#222;">
              <span style="color:#222; font-weight: bold;">850.000</span>
              <span
                style="font-size: 13px; color: #18D77E; font-weight: bold; margin-left: 4px; vertical-align: middle;">
                ▲ 100%
              </span>
            </td>
          </tr>
        </tbody>
      </table>
      <div style="text-align: center; margin: 10px 0 8px 0;">
        <div data-action="view-detail" data-param='{"id": 1, "name": "Thịt bò Úc"}'
          style="color: #337AB7; text-decoration: none; font-size: 18px; cursor: pointer;">Xem danh sách chi tiết</div>
      </div>
    </div>
  </div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Lắng nghe sự kiện click trên tất cả các phần tử có data-action="view-detail"
    const detailElements = document.querySelectorAll('[data-action="view-detail"]');

    detailElements.forEach(function (element) {
      // Xử lý sự kiện click
      element.addEventListener('click', function (event) {
        event.preventDefault();

        try {
          // Lấy dữ liệu từ attribute data-param
          const paramData = JSON.parse(this.getAttribute('data-param'));
          // Gửi postMessage tới parent window
          window.parent.postMessage({
            type: 'VIEW_DETAIL',
            action: 'view-detail',
            data: paramData,
            timestamp: Date.now(),
            callbackUrl: 'http://example/detail&id=1'
          }, '*');

        } catch (error) {
          console.error(error);
        }
      });
    });
  });
</script>
</body>

</html>
